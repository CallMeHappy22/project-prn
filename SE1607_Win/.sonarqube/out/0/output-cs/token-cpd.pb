¥
CC:\Users\thanh\Desktop\Project PRN\SE1607_Win\SE1607_Win\DAL\DAO.cs
	namespace 	

SE1607_Win
 
. 
DAL 
{ 
public 

class 
DAO 
{ 
string 
strConn 
; 
public 
DAO 
( 
) 
{ 	
var 
conf 
= 
new  
ConfigurationBuilder /
(/ 0
)0 1
. 
SetBasePath 
( 
	Directory &
.& '
GetCurrentDirectory' :
(: ;
); <
)< =
. 
AddJsonFile 
( 
$str /
,/ 0
true1 5
,5 6
true7 ;
); <
. 
Build 
( 
) 
; 
strConn 
= 
conf 
. 
GetConnectionString .
(. /
$str/ =
)= >
;> ?
} 	
public 
	DataTable 
GetDataTable %
(% &
string& ,
sql- 0
)0 1
{ 	
SqlConnection 
conn 
=  
new! $
SqlConnection% 2
(2 3
strConn3 :
): ;
;; <

SqlCommand 
cmd 
= 
new  

SqlCommand! +
(+ ,
sql, /
)/ 0
;0 1
cmd   
.   

Connection   
=   
conn   !
;  ! "
SqlDataAdapter"" 
da"" 
="" 
new""  #
SqlDataAdapter""$ 2
(""2 3
)""3 4
;""4 5
da## 
.## 
SelectCommand## 
=## 
cmd## "
;##" #
	DataTable%% 
dt%% 
=%% 
new%% 
	DataTable%% (
(%%( )
)%%) *
;%%* +
da&& 
.&& 
Fill&& 
(&& 
dt&& 
)&& 
;&& 
return(( 
dt(( 
;(( 
})) 	
public,, 
void,, 
Update,, 
(,, 

SqlCommand,, %
cmd,,& )
),,) *
{-- 	
SqlConnection.. 
conn.. 
=..  
new..! $
SqlConnection..% 2
(..2 3
strConn..3 :
)..: ;
;..; <
cmd// 
.// 

Connection// 
=// 
conn// !
;//! "
conn00 
.00 
Open00 
(00 
)00 
;00 
cmd11 
.11 
ExecuteNonQuery11 
(11  
)11  !
;11! "
conn22 
.22 
Close22 
(22 
)22 
;22 
}33 	
}44 
}55 ç
GC:\Users\thanh\Desktop\Project PRN\SE1607_Win\SE1607_Win\DAL\RoomDAO.cs
	namespace 	

SE1607_Win
 
. 
DAL 
{		 
public

 

class

 
RoomDAO

 
:

 
DAO

 
{ 
static 
RoomDAO 
Instance 
;  
RoomDAO 
( 
) 
{ 
} 
static 
RoomDAO 
( 
) 
=> 
Instance $
=% &
new' *
RoomDAO+ 2
(2 3
)3 4
;4 5
public 
static 
RoomDAO 
GetInstance )
() *
)* +
=>, .
Instance/ 7
;7 8
public 
	DataTable 
GetDataTable %
(% &
)& '
=>( *
GetDataTable+ 7
(7 8
$str8 M
)M N
;N O
} 
} ñ"
GC:\Users\thanh\Desktop\Project PRN\SE1607_Win\SE1607_Win\DAL\ShowDAO.cs
	namespace

 	

SE1607_Win


 
.

 
DAL

 
{ 
class 	
ShowDAO
 
: 
DAO 
{ 
static 
ShowDAO 
Instance 
;  
ShowDAO 
( 
) 
{ 
} 
static 
ShowDAO 
( 
) 
=> 
Instance $
=% &
new' *
ShowDAO+ 2
(2 3
)3 4
;4 5
public 
static 
ShowDAO 
GetInstance )
() *
)* +
=>, .
Instance/ 7
;7 8
public 
	DataTable 
GetDataTable %
(% &
)& '
=>( *
GetDataTable+ 7
(7 8
$str8 M
)M N
;N O
public 
Show 
GetById 
( 
int 
id  "
)" #
{ 	
	DataTable 
dt 
= 
GetDataTable '
(' (
$str( M
+N O
idP R
)R S
;S T
if 
( 
dt 
. 
Rows 
. 
Count 
==  
$num! "
)" #
return$ *
null+ /
;/ 0
DataRow 
row 
= 
dt 
. 
Rows !
[! "
$num" #
]# $
;$ %
Show 
show 
= 
new 
Show  
{ 
ShowId 
= 
( 
int 
) 
row !
[! "
$str" *
]* +
,+ ,
RoomId 
= 
( 
int 
) 
row !
[! "
$str" *
]* +
,+ ,
FilmId 
= 
( 
int 
) 
row !
[! "
$str" *
]* +
,+ ,
ShowDate   
=   
(   
DateTime   $
)  $ %
row  % (
[  ( )
$str  ) 3
]  3 4
,  4 5
Status!! 
=!! 
(!! 
bool!! 
)!! 
row!! "
[!!" #
$str!!# +
]!!+ ,
,!!, -
Slot"" 
="" 
("" 
int"" 
)"" 
row"" 
[""  
$str""  &
]""& '
,""' (
Price## 
=## 
(## 
decimal##  
)##  !
row##! $
[##$ %
$str##% ,
]##, -
}$$ 
;$$ 
return%% 
show%% 
;%% 
}&& 	
public'' 
void'' 
Update'' 
('' 
Show'' 
show''  $
)''$ %
{(( 	

SqlCommand)) 
cmd)) 
=)) 
new))  

SqlCommand))! +
())+ ,
$str)), Q
+))Q R
$str** E
)**E F
;**F G
cmd++ 
.++ 

Parameters++ 
.++ 
AddWithValue++ '
(++' (
$str++( 1
,++1 2
show++3 7
.++7 8
FilmId++8 >
)++> ?
;++? @
cmd,, 
.,, 

Parameters,, 
.,, 
AddWithValue,, '
(,,' (
$str,,( /
,,,/ 0
show,,1 5
.,,5 6
Slot,,6 :
),,: ;
;,,; <
cmd-- 
.-- 

Parameters-- 
.-- 
AddWithValue-- '
(--' (
$str--( 0
,--0 1
show--2 6
.--6 7
Price--7 <
)--< =
;--= >
cmd.. 
... 

Parameters.. 
... 
AddWithValue.. '
(..' (
$str..( 1
,..1 2
show..3 7
...7 8
ShowId..8 >
)..> ?
;..? @
Update00 
(00 
cmd00 
)00 
;00 
}11 	
}33 
}44 Æ

DC:\Users\thanh\Desktop\Project PRN\SE1607_Win\SE1607_Win\DTL\Show.cs
	namespace 	

SE1607_Win
 
. 
DTL 
{ 
public		 

class		 
Show		 
{

 
public 
int 
ShowId 
{ 
get 
;  
set! $
;$ %
}& '
public 
int 
RoomId 
{ 
get 
;  
set! $
;$ %
}& '
public 
int 
FilmId 
{ 
get 
;  
set! $
;$ %
}& '
public 
DateTime 
ShowDate  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
int 
Slot 
{ 
get 
; 
set "
;" #
}$ %
public 
bool 
Status 
{ 
get  
;  !
set" %
;% &
}' (
public 
Decimal 
Price 
{ 
get "
;" #
set$ '
;' (
}) *
} 
} …
AC:\Users\thanh\Desktop\Project PRN\SE1607_Win\SE1607_Win\Form2.cs
	namespace 	

SE1607_Win
 
{ 
public 

partial 
class 
Form2 
:  
Form! %
{ 
public 
Form2 
( 
) 
{ 	
InitializeComponent 
(  
)  !
;! "
} 	
} 
} †
HC:\Users\thanh\Desktop\Project PRN\SE1607_Win\SE1607_Win\GUI\LoginGUI.cs
	namespace 	

SE1607_Win
 
. 
GUI 
{ 
public 

partial 
class 
LoginGUI !
:" #
Form$ (
{ 
public 
LoginGUI 
( 
) 
{ 	
InitializeComponent 
(  
)  !
;! "
} 	
private 
void 
btnLogin_Click #
(# $
object$ *
sender+ 1
,1 2
	EventArgs3 <
e= >
)> ?
{ 	
string 
name 
, 
pass 
; 
var 
conf 
= 
new  
ConfigurationBuilder /
(/ 0
)0 1
. 
SetBasePath 
( 
	Directory &
.& '
GetCurrentDirectory' :
(: ;
); <
)< =
. 
AddJsonFile 
( 
$str /
,/ 0
true1 5
,5 6
true7 ;
); <
. 
Build 
( 
) 
; 
name 
= 
conf 
[ 
$str #
]# $
;$ %
pass 
= 
conf 
[ 
$str '
]' (
;( )
if!! 
(!! 
txtName!! 
.!! 
Text!! 
==!! 
name!!  $
&&!!% '
txtPassword!!( 3
.!!3 4
Text!!4 8
==!!9 ;
pass!!< @
)!!@ A
{"" 
Settings## 
.## 
UserName## !
=##" #
name##$ (
;##( )

MessageBox$$ 
.$$ 
Show$$ 
($$  
$str$$  D
)$$D E
;$$E F
}%% 
else&& 

MessageBox'' 
.'' 
Show'' 
(''  
$str''  6
)''6 7
;''7 8
}(( 	
})) 
}** ‰,
GC:\Users\thanh\Desktop\Project PRN\SE1607_Win\SE1607_Win\GUI\MainGUI.cs
	namespace 	

SE1607_Win
 
. 
GUI 
{ 
public 

partial 
class 
MainGUI  
:! "
Form# '
{ 
public 
MainGUI 
( 
) 
{ 	
InitializeComponent 
(  
)  !
;! "
} 	
private 
void '
exitToolStripMenuItem_Click 0
(0 1
object1 7
sender8 >
,> ?
	EventArgs@ I
eJ K
)K L
{ 	
Application 
. 
Exit 
( 
) 
; 
} 	
private 
void &
newToolStripMenuItem_Click /
(/ 0
object0 6
sender7 =
,= >
	EventArgs? H
eI J
)J K
{ 	
Form2 
f 
= 
new 
Form2 
(  
)  !
;! "
DialogResult 
dr 
= 
f 
.  

ShowDialog  *
(* +
)+ ,
;, -
if 
( 
dr 
== 
DialogResult "
." #
OK# %
)% &

MessageBox   
.   
Show   
(    
$str    .
)  . /
;  / 0
else!! 

MessageBox"" 
."" 
Show"" 
(""  
$str""  2
)""2 3
;""3 4
}## 	
private%% 
void%% "
toolStripButton1_Click%% +
(%%+ ,
object%%, 2
sender%%3 9
,%%9 :
	EventArgs%%; D
e%%E F
)%%F G
{&& 	
Form2'' 
f'' 
='' 
new'' 
Form2'' 
(''  
)''  !
;''! "
f(( 
.(( 
TopLevel(( 
=(( 
false(( 
;(( 
f)) 
.)) 
FormBorderStyle)) 
=)) 
FormBorderStyle))  /
.))/ 0
None))0 4
;))4 5
f** 
.** 
Show** 
(** 
)** 
;** 
toolStripContainer1,, 
.,,  
ContentPanel,,  ,
.,,, -
Controls,,- 5
.,,5 6
Clear,,6 ;
(,,; <
),,< =
;,,= >
toolStripContainer1-- 
.--  
ContentPanel--  ,
.--, -
Controls--- 5
.--5 6
Add--6 9
(--9 :
f--: ;
)--; <
;--< =
}.. 	
private00 
void00 (
loginToolStripMenuItem_Click00 1
(001 2
object002 8
sender009 ?
,00? @
	EventArgs00A J
e00K L
)00L M
{11 	
if22 
(22 "
loginToolStripMenuItem22 &
.22& '
Text22' +
.22+ ,

StartsWith22, 6
(226 7
$str227 >
)22> ?
)22? @
{33 
LoginGUI44 
f44 
=44 
new44  
LoginGUI44! )
(44) *
)44* +
;44+ ,
DialogResult55 
dr55 
=55  !
f55" #
.55# $

ShowDialog55$ .
(55. /
)55/ 0
;550 1
}66 
else77 
{88 
Settings99 
.99 
UserName99 !
=99" #
$str99$ &
;99& '

MessageBox:: 
.:: 
Show:: 
(::  
$str::  4
)::4 5
;::5 6
};; 
}<< 	
private>> 
void>> 
MainGUI_Activated>> &
(>>& '
object>>' -
sender>>. 4
,>>4 5
	EventArgs>>6 ?
e>>@ A
)>>A B
{?? 	
if@@ 
(@@ 
Settings@@ 
.@@ 
UserName@@ !
==@@" $
$str@@% '
)@@' ("
loginToolStripMenuItemAA &
.AA& '
TextAA' +
=AA, -
$strAA. 5
;AA5 6
elseBB "
loginToolStripMenuItemCC &
.CC& '
TextCC' +
=CC, -
$"CC. 0
$strCC0 8
{CC8 9
SettingsCC9 A
.CCA B
UserNameCCB J
}CCJ K
$strCCK L
"CCL M
;CCM N
}DD 	
privateFF 
voidFF '
showToolStripMenuItem_ClickFF 0
(FF0 1
objectFF1 7
senderFF8 >
,FF> ?
	EventArgsFF@ I
eFFJ K
)FFK L
{GG 	
ShowGUIHH 
fHH 
=HH 
newHH 
ShowGUIHH #
(HH# $
)HH$ %
;HH% &
fII 
.II 
TopLevelII 
=II 
falseII 
;II 
fJJ 
.JJ 
FormBorderStyleJJ 
=JJ 
FormBorderStyleJJ  /
.JJ/ 0
NoneJJ0 4
;JJ4 5
fKK 
.KK 
ShowKK 
(KK 
)KK 
;KK 
toolStripContainer1MM 
.MM  
ContentPanelMM  ,
.MM, -
ControlsMM- 5
.MM5 6
ClearMM6 ;
(MM; <
)MM< =
;MM= >
toolStripContainer1NN 
.NN  
ContentPanelNN  ,
.NN, -
ControlsNN- 5
.NN5 6
AddNN6 9
(NN9 :
fNN: ;
)NN; <
;NN< =
}OO 	
}PP 
}QQ é
HC:\Users\thanh\Desktop\Project PRN\SE1607_Win\SE1607_Win\GUI\Settings.cs
	namespace 	

SE1607_Win
 
. 
GUI 
{ 
public		 

class		 
Settings		 
{

 
public 
static 
string 
UserName %
=& '
$str( *
;* +
} 
} ëY
NC:\Users\thanh\Desktop\Project PRN\SE1607_Win\SE1607_Win\GUI\ShowAddEditGUI.cs
	namespace 	

SE1607_Win
 
. 
GUI 
{ 
public 

partial 
class 
ShowAddEditGUI '
:( )
Form* .
{ 
int 
add 
, 
id 
; 
CinemaContext 
context 
; 
public 
ShowAddEditGUI 
( 
int !
add" %
,% &
int' *
id+ -
,- .
CinemaContext/ <
context= D
)D E
{ 	
InitializeComponent 
(  
)  !
;! "
this 
. 
context 
= 
context "
;" #
this 
. 
add 
= 
add 
; 
this 
. 
id 
= 
id 
; 
	cboRoomId 
. 

DataSource  
=! "
context# *
.* +
Rooms+ 0
.0 1
ToList1 7
<7 8
Room8 <
>< =
(= >
)> ?
;? @
	cboRoomId 
. 
DisplayMember #
=$ %
$str& ,
;, -
	cboRoomId 
. 
ValueMember !
=" #
$str$ ,
;, -
	cboFilmId!! 
.!! 

DataSource!!  
=!!! "
context!!# *
.!!* +
Films!!+ 0
.!!0 1
ToList!!1 7
<!!7 8
Film!!8 <
>!!< =
(!!= >
)!!> ?
;!!? @
	cboFilmId"" 
."" 
DisplayMember"" #
=""$ %
$str""& -
;""- .
	cboFilmId## 
.## 
ValueMember## !
=##" #
$str##$ ,
;##, -
if&& 
(&& 
add&& 
==&& 
$num&& 
)&& 
{'' 
Show(( 
show(( 
=(( 
context(( #
.((# $
Shows(($ )
.(() *
Find((* .
(((. /
id((/ 1
)((1 2
;((2 3
	cboRoomId)) 
.)) 
SelectedValue)) '
=))( )
show))* .
.)). /
RoomId))/ 5
;))5 6
dtpShowDate** 
.** 
Value** !
=**" #
show**$ (
.**( )
ShowDate**) 1
??**1 3
DateTime**3 ;
.**; <
Now**< ?
;**? @
	cboFilmId,, 
.,, 
SelectedValue,, '
=,,( )
show,,* .
.,,. /
FilmId,,/ 5
;,,5 6
txtPrice-- 
.-- 
Text-- 
=-- 
show--  $
.--$ %
Price--% *
.--* +
ToString--+ 3
(--3 4
)--4 5
;--5 6
bool// 
[// 
]// 
slots// 
=// 
new// "
bool//# '
[//' (
$num//( )
]//) *
;//* +
List00 
<00 
Show00 
>00 
shows00  
=00! "
context00# *
.00* +
Shows00+ 0
.11 
Where11 
(11 
s11 
=>11 
s11  !
.11! "
ShowDate11" *
==11+ -
show11. 2
.112 3
ShowDate113 ;
&&22 
s22 
.22 
RoomId22 
==22  "
show22# '
.22' (
RoomId22( .
&&33 
s33 
.33 
ShowId33 
!=33  "
show33# '
.33' (
ShowId33( .
)33. /
.44 
ToList44 
<44 
Show44  
>44  !
(44! "
)44" #
;44# $
foreach55 
(55 
Show55 
s55 
in55  "
shows55# (
)55( )
slots66 
[66 
(66 
int66 
)66 
s66  !
.66! "
Slot66" &
-66' (
$num66) *
]66* +
=66, -
true66. 2
;662 3
for77 
(77 
int77 
i77 
=77 
$num77 
;77 
i77  !
<77" #
slots77$ )
.77) *
Length77* 0
;770 1
i772 3
++773 5
)775 6
if88 
(88 
slots88 
[88 
i88 
]88  
==88! #
false88$ )
)88) *
cboSlot88+ 2
.882 3
Items883 8
.888 9
Add889 <
(88< =
i88= >
+88? @
$num88A B
)88B C
;88C D
cboSlot:: 
.:: 
Text:: 
=:: 
show:: #
.::# $
Slot::$ (
.::( )
ToString::) 1
(::1 2
)::2 3
;::3 4
}<< 
else>> 
{?? 
	cboRoomId@@ 
.@@ 
SelectedValue@@ '
=@@( )
id@@* ,
;@@, -
dtpShowDateAA 
.AA 
ValueAA !
=AA" #
DateTimeAA$ ,
.AA, -
NowAA- 0
;AA0 1
boolCC 
[CC 
]CC 
slotsCC 
=CC 
newCC "
boolCC# '
[CC' (
$numCC( )
]CC) *
;CC* +
ListDD 
<DD 
ShowDD 
>DD 
showsDD  
=DD! "
contextDD# *
.DD* +
ShowsDD+ 0
.EE 
WhereEE 
(EE 
sEE 
=>EE 
sEE  !
.EE! "
ShowDateEE" *
==EE+ -
DateTimeEE. 6
.EE6 7
NowEE7 :
.EE: ;
DateEE; ?
&&FF 
sFF 
.FF 
RoomIdFF 
==FF  "
idFF# %
)FF% &
.GG 
ToListGG 
<GG 
ShowGG  
>GG  !
(GG! "
)GG" #
;GG# $
foreachHH 
(HH 
ShowHH 
sHH 
inHH  "
showsHH# (
)HH( )
slotsII 
[II 
(II 
intII 
)II 
sII  
.II  !
SlotII! %
-II& '
$numII( )
]II) *
=II+ ,
trueII- 1
;II1 2
forJJ 
(JJ 
intJJ 
iJJ 
=JJ 
$numJJ 
;JJ 
iJJ  !
<JJ" #
slotsJJ$ )
.JJ) *
LengthJJ* 0
;JJ0 1
iJJ2 3
++JJ3 5
)JJ5 6
ifKK 
(KK 
slotsKK 
[KK 
iKK 
]KK  
==KK! #
falseKK$ )
)KK) *
cboSlotKK+ 2
.KK2 3
ItemsKK3 8
.KK8 9
AddKK9 <
(KK< =
iKK= >
+KK? @
$numKKA B
)KKB C
;KKC D
cboSlotMM 
.MM 
SelectedIndexMM %
=MM& '
$numMM( )
;MM) *
}NN 
}QQ 	
privateSS 
voidSS 
btnSave_ClickSS "
(SS" #
objectSS# )
senderSS* 0
,SS0 1
	EventArgsSS2 ;
eSS< =
)SS= >
{TT 	
ifVV 
(VV 
addVV 
==VV 
$numVV 
)VV 
{WW 
tryXX 
{YY 
ShowZZ 
showZZ 
=ZZ 
contextZZ  '
.ZZ' (
ShowsZZ( -
.ZZ- .
FindZZ. 2
(ZZ2 3
idZZ3 5
)ZZ5 6
;ZZ6 7
show[[ 
.[[ 
RoomId[[ 
=[[  !
([[" #
int[[# &
)[[& '
	cboRoomId[[( 1
.[[1 2
SelectedValue[[2 ?
;[[? @
show\\ 
.\\ 
ShowDate\\ !
=\\" #
dtpShowDate\\$ /
.\\/ 0
Value\\0 5
;\\5 6
show]] 
.]] 
FilmId]] 
=]]  !
(]]" #
int]]# &
)]]& '
	cboFilmId]]( 1
.]]1 2
SelectedValue]]2 ?
;]]? @
show^^ 
.^^ 
Price^^ 
=^^  
decimal^^! (
.^^( )
Parse^^) .
(^^. /
txtPrice^^/ 7
.^^7 8
Text^^8 <
)^^< =
;^^= >
show__ 
.__ 
Slot__ 
=__ 
int__  #
.__# $
Parse__$ )
(__) *
cboSlot__* 1
.__1 2
Text__2 6
)__6 7
;__7 8
context`` 
.`` 
Shows`` !
.``! "
Update``" (
(``( )
show``) -
)``- .
;``. /
contextaa 
.aa 
SaveChangesaa '
(aa' (
)aa( )
;aa) *

MessageBoxbb 
.bb 
Showbb #
(bb# $
$strbb$ :
)bb: ;
;bb; <
}dd 
catchee 
(ee 
	Exceptionee 
exee  "
)ee" #
{ff 

MessageBoxgg 
.gg 
Showgg #
(gg# $
exgg$ &
.gg& '
Messagegg' .
)gg. /
;gg/ 0
}hh 
}ii 
elsekk 
{ll 
trymm 
{nn 
Showoo 
showoo 
=oo 
newoo  #
Showoo$ (
(oo( )
)oo) *
;oo* +
showpp 
.pp 
RoomIdpp 
=pp  !
(pp" #
intpp# &
)pp& '
	cboRoomIdpp' 0
.pp0 1
SelectedValuepp1 >
;pp> ?
showqq 
.qq 
ShowDateqq !
=qq" #
dtpShowDateqq$ /
.qq/ 0
Valueqq0 5
;qq5 6
showrr 
.rr 
FilmIdrr 
=rr  !
(rr" #
intrr# &
)rr& '
	cboFilmIdrr' 0
.rr0 1
SelectedValuerr1 >
;rr> ?
showss 
.ss 
Pricess 
=ss  
decimalss! (
.ss( )
Parsess) .
(ss. /
txtPricess/ 7
.ss7 8
Textss8 <
)ss< =
;ss= >
showtt 
.tt 
Slottt 
=tt 
inttt  #
.tt# $
Parsett$ )
(tt) *
cboSlottt* 1
.tt1 2
Texttt2 6
)tt6 7
;tt7 8
contextuu 
.uu 
Showsuu !
.uu! "
Adduu" %
(uu% &
showuu& *
)uu* +
;uu+ ,
contextvv 
.vv 
SaveChangesvv '
(vv' (
)vv( )
;vv) *

MessageBoxww 
.ww 
Showww #
(ww# $
$strww$ 9
)ww9 :
;ww: ;
}yy 
catchzz 
(zz 
	Exceptionzz  
exzz! #
)zz# $
{{{ 

MessageBox|| 
.|| 
Show|| #
(||# $
ex||$ &
.||& '
Message||' .
)||. /
;||/ 0
}}} 
}~~ 
} 	
}
ÄÄ 
}ÅÅ ñ[
GC:\Users\thanh\Desktop\Project PRN\SE1607_Win\SE1607_Win\GUI\ShowGUI.cs
	namespace 	

SE1607_Win
 
. 
GUI 
{ 
public 

partial 
class 
ShowGUI  
:! "
Form# '
{ 
CinemaContext 
context 
; 
public 
ShowGUI 
( 
) 
{ 	
InitializeComponent 
(  
)  !
;! "
context 
= 
new 
CinemaContext '
(' (
)( )
;) *
	cboFilmId 
. 

DataSource  
=! "
context# *
.* +
Films+ 0
.0 1
ToList1 7
<7 8
Film8 <
>< =
(= >
)> ?
;? @
	cboFilmId 
. 
DisplayMember #
=$ %
$str& -
;- .
	cboFilmId 
. 
ValueMember !
=" #
$str$ ,
;, -
dtpShowDate 
. 
Value 
= 
DateTime  (
.( )
Now) ,
;, -
	cboRoomId   
.   

DataSource    
=  ! "
context  # *
.  * +
Rooms  + 0
.  0 1
ToList  1 7
<  7 8
Room  8 <
>  < =
(  = >
)  > ?
;  ? @
	cboRoomId!! 
.!! 
DisplayMember!! #
=!!$ %
$str!!& ,
;!!, -
	cboRoomId"" 
."" 
ValueMember"" !
=""" #
$str""$ ,
;"", -
bindGrid$$ 
($$ 
false$$ 
)$$ 
;$$ 
}%% 	
void'' 
bindGrid'' 
('' 
bool'' 
filter'' !
)''! "
{(( 	
dataGridView1.. 
... 
Columns.. !
...! "
Clear.." '
(..' (
)..( )
;..) *
dataGridView1// 
.// 

DataSource// $
=//% &
context//' .
.//. /
Shows/// 4
.00 
Where00 
(00 
s00 
=>00 
s00 
.00 
FilmId00 $
==00% '
(00( )
filter00) /
?00/ 0
(000 1
int001 4
)004 5
	cboFilmId005 >
.00> ?
SelectedValue00? L
:00L M
s00M N
.00N O
FilmId00O U
)00U V
&&11 
s11 
.11 
ShowDate11 
==11  
(11! "
filter11" (
?11( )
dtpShowDate11) 4
.114 5
Value115 :
:11: ;
s11; <
.11< =
ShowDate11= E
)11E F
&&22 
s22 
.22 
RoomId22 
==22 
(22  
filter22  &
?22& '
(22' (
int22( +
)22+ ,
	cboRoomId22, 5
.225 6
SelectedValue226 C
:22C D
s22D E
.22E F
RoomId22F L
)22L M
)22M N
.33 
OrderByDescending33 "
(33" #
s33# $
=>33% '
s33( )
.33) *
ShowDate33* 2
)332 3
.44 
ToList44 
<44 
Show44 
>44 
(44 
)44 
;44  
int55 
count55 
=55 
dataGridView155 %
.55% &
Columns55& -
.55- .
Count55. 3
;553 4$
DataGridViewButtonColumn77 $
btnEdit77% ,
=77- .
new77/ 2$
DataGridViewButtonColumn773 K
{88 
Name99 
=99 
$str99 
,99 
Text:: 
=:: 
$str:: 
,:: '
UseColumnTextForButtonValue;; +
=;;, -
true;;. 2
}<< 
;<< 
dataGridView1== 
.== 
Columns== !
.==! "
Insert==" (
(==( )
count==) .
,==. /
btnEdit==0 7
)==7 8
;==8 9$
DataGridViewButtonColumn?? $
	btnDelete??% .
=??/ 0
new??1 4$
DataGridViewButtonColumn??5 M
{@@ 
NameAA 
=AA 
$strAA 
,AA  
TextBB 
=BB 
$strBB 
,BB  '
UseColumnTextForButtonValueCC +
=CC, -
trueCC. 2
}DD 
;DD 
dataGridView1EE 
.EE 
ColumnsEE !
.EE! "
InsertEE" (
(EE( )
countEE) .
+EE/ 0
$numEE1 2
,EE2 3
	btnDeleteEE4 =
)EE= >
;EE> ?
dataGridView1FF 
.FF 
ColumnsFF !
[FF! "
$strFF" *
]FF* +
.FF+ ,
VisibleFF, 3
=FF4 5
falseFF6 ;
;FF; <
dataGridView1GG 
.GG 
ColumnsGG !
[GG! "
$strGG" *
]GG* +
.GG+ ,
VisibleGG, 3
=GG4 5
falseGG6 ;
;GG; <
dataGridView1HH 
.HH 
ColumnsHH !
[HH! "
$strHH" (
]HH( )
.HH) *
VisibleHH* 1
=HH2 3
falseHH4 9
;HH9 :
dataGridView1II 
.II 
ColumnsII !
[II! "
$strII" (
]II( )
.II) *
VisibleII* 1
=II2 3
falseII4 9
;II9 :
dataGridView1JJ 
.JJ 
ColumnsJJ !
[JJ! "
$strJJ" ,
]JJ, -
.JJ- .
VisibleJJ. 5
=JJ6 7
falseJJ8 =
;JJ= >
}KK 	
privateMM 
voidMM #
dataGridView1_CellClickMM ,
(MM, -
objectMM- 3
senderMM4 :
,MM: ;%
DataGridViewCellEventArgsMM< U
eMMV W
)MMW X
{NN 	
ifOO 
(OO 
eOO 
.OO 
ColumnIndexOO 
==OO 
dataGridView1OO  -
.OO- .
ColumnsOO. 5
[OO5 6
$strOO6 <
]OO< =
.OO= >
IndexOO> C
)OOC D
{PP 
intQQ 
showIdQQ 
;QQ 
showIdRR 
=RR 
(RR 
intRR 
)RR 
dataGridView1RR ,
.RR, -
RowsRR- 1
[RR1 2
eRR2 3
.RR3 4
RowIndexRR4 <
]RR< =
.RR= >
CellsRR> C
[RRC D
$strRRD L
]RRL M
.RRM N
ValueRRN S
;RRS T
ShowAddEditGUIVV 
fVV  
=VV! "
newVV# &
ShowAddEditGUIVV' 5
(VV5 6
$numVV6 7
,VV7 8
showIdVV9 ?
,VV? @
contextVVA H
)VVH I
;VVI J
DialogResultWW 
drWW 
=WW  !
fWW" #
.WW# $

ShowDialogWW$ .
(WW. /
)WW/ 0
;WW0 1
ifXX 
(XX 
drXX 
==XX 
DialogResultXX &
.XX& '
OKXX' )
)XX) *
bindGridYY 
(YY 
trueYY !
)YY! "
;YY" #
}[[ 
if\\ 
(\\ 
e\\ 
.\\ 
ColumnIndex\\ 
==\\  
dataGridView1\\! .
.\\. /
Columns\\/ 6
[\\6 7
$str\\7 ?
]\\? @
.\\@ A
Index\\A F
)\\F G
{]] 
DialogResult^^ 
dr^^ 
=^^  !

MessageBox^^" ,
.^^, -
Show^^- 1
(^^1 2
$str^^2 J
,^^J K
$str^^L U
,^^U V
MessageBoxButtons__ %
.__% &
YesNo__& +
,__+ ,
MessageBoxIcon__- ;
.__; <
Question__< D
)__D E
;__E F
if`` 
(`` 
dr`` 
==`` 
DialogResult`` &
.``& '
No``' )
)``) *
return``+ 1
;``1 2
tryaa 
{bb 
intcc 
showIdcc 
;cc 
showIddd 
=dd 
(dd 
intdd !
)dd! "
dataGridView1dd" /
.dd/ 0
Rowsdd0 4
[dd4 5
edd5 6
.dd6 7
RowIndexdd7 ?
]dd? @
.dd@ A
CellsddA F
[ddF G
$strddG O
]ddO P
.ddP Q
ValueddQ V
;ddV W
Showff 
showff 
=ff 
contextff  '
.ff' (
Showsff( -
.ff- .
Findff. 2
(ff2 3
showIdff3 9
)ff9 :
;ff: ;
contextgg 
.gg 
Showsgg !
.gg! "
Removegg" (
(gg( )
showgg) -
)gg- .
;gg. /
contexthh 
.hh 
SaveChangeshh '
(hh' (
)hh( )
;hh) *
bindGridjj 
(jj 
truejj !
)jj! "
;jj" #

MessageBoxkk 
.kk 
Showkk #
(kk# $
$strkk$ <
)kk< =
;kk= >
}ll 
catchmm 
(mm 
	Exceptionmm 
exmm  "
)mm" #
{nn 

MessageBoxoo 
.oo 
Showoo #
(oo# $
exoo$ &
.oo& '
Messageoo' .
)oo. /
;oo/ 0
}pp 
}rr 
}ss 	
privateuu 
voiduu 
btnSearch_Clickuu $
(uu$ %
objectuu% +
senderuu, 2
,uu2 3
	EventArgsuu4 =
euu> ?
)uu? @
{vv 	
bindGridww 
(ww 
trueww 
)ww 
;ww 
}xx 	
privatezz 
voidzz -
!dataGridView1_DataBindingCompletezz 6
(zz6 7
objectzz7 =
senderzz> D
,zzD E0
$DataGridViewBindingCompleteEventArgszzF j
ezzk l
)zzl m
{{{ 	
lblNo|| 
.|| 
Text|| 
=|| 
dataGridView1|| &
.||& '
Rows||' +
.||+ ,
Count||, 1
.||1 2
ToString||2 :
(||: ;
)||; <
;||< =
}}} 	
private 
void 
btnAdd_Click !
(! "
object" (
sender) /
,/ 0
	EventArgs1 :
e; <
)< =
{
ÄÄ 	
int
ÅÅ 
roomId
ÅÅ 
;
ÅÅ 
roomId
ÇÇ 
=
ÇÇ 
(
ÇÇ 
int
ÇÇ 
)
ÇÇ 
	cboRoomId
ÇÇ $
.
ÇÇ$ %
SelectedValue
ÇÇ% 2
;
ÇÇ2 3
ShowAddEditGUI
ÉÉ 
f
ÉÉ 
=
ÉÉ 
new
ÉÉ "
ShowAddEditGUI
ÉÉ# 1
(
ÉÉ1 2
$num
ÉÉ2 3
,
ÉÉ3 4
roomId
ÉÉ5 ;
,
ÉÉ; <
context
ÉÉ= D
)
ÉÉD E
;
ÉÉE F
DialogResult
ÑÑ 
dr
ÑÑ 
=
ÑÑ 
f
ÑÑ 
.
ÑÑ  

ShowDialog
ÑÑ  *
(
ÑÑ* +
)
ÑÑ+ ,
;
ÑÑ, -
if
ÖÖ 
(
ÖÖ 
dr
ÖÖ 
==
ÖÖ 
DialogResult
ÖÖ "
.
ÖÖ" #
OK
ÖÖ# %
)
ÖÖ% &
bindGrid
ÜÜ 
(
ÜÜ 
true
ÜÜ 
)
ÜÜ 
;
ÜÜ 
}
áá 	
}
àà 
}ââ ·	
JC:\Users\thanh\Desktop\Project PRN\SE1607_Win\SE1607_Win\Models\Booking.cs
	namespace 	

SE1607_Win
 
. 
Models 
{ 
public 

partial 
class 
Booking  
{		 
public

 
int

 
	BookingId

 
{

 
get

 "
;

" #
set

$ '
;

' (
}

) *
public 
int 
ShowId 
{ 
get 
;  
set! $
;$ %
}& '
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 

SeatStatus  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
decimal 
? 
Amount 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
virtual 
Show 
Show  
{! "
get# &
;& '
set( +
;+ ,
}- .
} 
} ™y
PC:\Users\thanh\Desktop\Project PRN\SE1607_Win\SE1607_Win\Models\CinemaContext.cs
	namespace		 	

SE1607_Win		
 
.		 
Models		 
{

 
public 

partial 
class 
CinemaContext &
:' (
	DbContext) 2
{ 
public 
CinemaContext 
( 
) 
{ 	
} 	
public 
CinemaContext 
( 
DbContextOptions -
<- .
CinemaContext. ;
>; <
options= D
)D E
: 
base 
( 
options 
) 
{ 	
} 	
public 
virtual 
DbSet 
< 
Booking $
>$ %
Bookings& .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
public 
virtual 
DbSet 
< 
Country $
>$ %
	Countries& /
{0 1
get2 5
;5 6
set7 :
;: ;
}< =
public 
virtual 
DbSet 
< 
Film !
>! "
Films# (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public 
virtual 
DbSet 
< 
Genre "
>" #
Genres$ *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
public 
virtual 
DbSet 
< 
Room !
>! "
Rooms# (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public 
virtual 
DbSet 
< 
Show !
>! "
Shows# (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
	protected 
override 
void 
OnConfiguring  -
(- .#
DbContextOptionsBuilder. E
optionsBuilderF T
)T U
{ 	
var 
conf 
= 
new  
ConfigurationBuilder /
(/ 0
)0 1
.   
SetBasePath   
(   
	Directory   &
.  & '
GetCurrentDirectory  ' :
(  : ;
)  ; <
)  < =
.!! 
AddJsonFile!! 
(!! 
$str!! /
,!!/ 0
true!!1 5
,!!5 6
true!!7 ;
)!!; <
."" 
Build"" 
("" 
)"" 
;"" 
if$$ 
($$ 
!$$ 
optionsBuilder$$ 
.$$  
IsConfigured$$  ,
)$$, -
{%% 
optionsBuilder'' 
.'' 
UseSqlServer'' +
(''+ ,
conf'', 0
.''0 1
GetConnectionString''1 D
(''D E
$str''E S
)''S T
)''T U
;''U V
}(( 
})) 	
	protected++ 
override++ 
void++ 
OnModelCreating++  /
(++/ 0
ModelBuilder++0 <
modelBuilder++= I
)++I J
{,, 	
modelBuilder-- 
.-- 
HasAnnotation-- &
(--& '
$str--' =
,--= >
$str--? ]
)--] ^
;--^ _
modelBuilder// 
.// 
Entity// 
<//  
Booking//  '
>//' (
(//( )
entity//) /
=>//0 2
{00 
entity11 
.11 
Property11 
(11  
e11  !
=>11" $
e11% &
.11& '
	BookingId11' 0
)110 1
.111 2
HasColumnName112 ?
(11? @
$str11@ K
)11K L
;11L M
entity33 
.33 
Property33 
(33  
e33  !
=>33" $
e33% &
.33& '
Amount33' -
)33- .
.33. /
HasColumnType33/ <
(33< =
$str33= D
)33D E
;33E F
entity55 
.55 
Property55 
(55  
e55  !
=>55" $
e55% &
.55& '
Name55' +
)55+ ,
.55, -
HasMaxLength55- 9
(559 :
$num55: =
)55= >
;55> ?
entity77 
.77 
Property77 
(77  
e77  !
=>77" $
e77% &
.77& '

SeatStatus77' 1
)771 2
.88 
HasMaxLength88 !
(88! "
$num88" &
)88& '
.99 
IsFixedLength99 "
(99" #
true99# '
)99' (
;99( )
entity;; 
.;; 
Property;; 
(;;  
e;;  !
=>;;" $
e;;% &
.;;& '
ShowId;;' -
);;- .
.;;. /
HasColumnName;;/ <
(;;< =
$str;;= E
);;E F
;;;F G
entity== 
.== 
HasOne== 
(== 
d== 
=>==  "
d==# $
.==$ %
Show==% )
)==) *
.>> 
WithMany>> 
(>> 
p>> 
=>>>  "
p>># $
.>>$ %
Bookings>>% -
)>>- .
.?? 
HasForeignKey?? "
(??" #
d??# $
=>??% '
d??( )
.??) *
ShowId??* 0
)??0 1
.@@ 
OnDelete@@ 
(@@ 
DeleteBehavior@@ ,
.@@, -
ClientSetNull@@- :
)@@: ;
.AA 
HasConstraintNameAA &
(AA& '
$strAA' :
)AA: ;
;AA; <
}BB 
)BB 
;BB 
modelBuilderDD 
.DD 
EntityDD 
<DD  
CountryDD  '
>DD' (
(DD( )
entityDD) /
=>DD0 2
{EE 
entityFF 
.FF 
HasKeyFF 
(FF 
eFF 
=>FF  "
eFF# $
.FF$ %
CountryCodeFF% 0
)FF0 1
.GG 
HasNameGG 
(GG 
$strGG )
)GG) *
;GG* +
entityII 
.II 
PropertyII 
(II  
eII  !
=>II" $
eII% &
.II& '
CountryCodeII' 2
)II2 3
.JJ 
HasMaxLengthJJ !
(JJ! "
$numJJ" #
)JJ# $
.KK 
IsFixedLengthKK "
(KK" #
trueKK# '
)KK' (
;KK( )
entityMM 
.MM 
PropertyMM 
(MM  
eMM  !
=>MM" $
eMM% &
.MM& '
CountryNameMM' 2
)MM2 3
.MM3 4
HasMaxLengthMM4 @
(MM@ A
$numMMA C
)MMC D
;MMD E
}NN 
)NN 
;NN 
modelBuilderPP 
.PP 
EntityPP 
<PP  
FilmPP  $
>PP$ %
(PP% &
entityPP& ,
=>PP- /
{QQ 
entityRR 
.RR 
PropertyRR 
(RR  
eRR  !
=>RR" $
eRR% &
.RR& '
FilmIdRR' -
)RR- .
.RR. /
HasColumnNameRR/ <
(RR< =
$strRR= E
)RRE F
;RRF G
entityTT 
.TT 
PropertyTT 
(TT  
eTT  !
=>TT" $
eTT% &
.TT& '
CountryCodeTT' 2
)TT2 3
.UU 

IsRequiredUU 
(UU  
)UU  !
.VV 
HasMaxLengthVV !
(VV! "
$numVV" #
)VV# $
.WW 
IsFixedLengthWW "
(WW" #
trueWW# '
)WW' (
;WW( )
entityYY 
.YY 
PropertyYY 
(YY  
eYY  !
=>YY" $
eYY% &
.YY& '
FilmUrlYY' .
)YY. /
.YY/ 0
HasMaxLengthYY0 <
(YY< =
$numYY= @
)YY@ A
;YYA B
entity[[ 
.[[ 
Property[[ 
([[  
e[[  !
=>[[" $
e[[% &
.[[& '
GenreId[[' .
)[[. /
.[[/ 0
HasColumnName[[0 =
([[= >
$str[[> G
)[[G H
;[[H I
entity]] 
.]] 
Property]] 
(]]  
e]]  !
=>]]" $
e]]% &
.]]& '
Title]]' ,
)]], -
.^^ 

IsRequired^^ 
(^^  
)^^  !
.__ 
HasMaxLength__ !
(__! "
$num__" %
)__% &
;__& '
entityaa 
.aa 
HasOneaa 
(aa 
daa 
=>aa  "
daa# $
.aa$ %!
CountryCodeNavigationaa% :
)aa: ;
.bb 
WithManybb 
(bb 
pbb 
=>bb  "
pbb# $
.bb$ %
Filmsbb% *
)bb* +
.cc 
HasForeignKeycc "
(cc" #
dcc# $
=>cc% '
dcc( )
.cc) *
CountryCodecc* 5
)cc5 6
.dd 
OnDeletedd 
(dd 
DeleteBehaviordd ,
.dd, -
ClientSetNulldd- :
)dd: ;
.ee 
HasConstraintNameee &
(ee& '
$stree' ;
)ee; <
;ee< =
entitygg 
.gg 
HasOnegg 
(gg 
dgg 
=>gg  "
dgg# $
.gg$ %
Genregg% *
)gg* +
.hh 
WithManyhh 
(hh 
phh 
=>hh  "
phh# $
.hh$ %
Filmshh% *
)hh* +
.ii 
HasForeignKeyii "
(ii" #
dii# $
=>ii% '
dii( )
.ii) *
GenreIdii* 1
)ii1 2
.jj 
OnDeletejj 
(jj 
DeleteBehaviorjj ,
.jj, -
ClientSetNulljj- :
)jj: ;
.kk 
HasConstraintNamekk &
(kk& '
$strkk' 8
)kk8 9
;kk9 :
}ll 
)ll 
;ll 
modelBuildernn 
.nn 
Entitynn 
<nn  
Genrenn  %
>nn% &
(nn& '
entitynn' -
=>nn. 0
{oo 
entitypp 
.pp 
Propertypp 
(pp  
epp  !
=>pp" $
epp% &
.pp& '
GenreIdpp' .
)pp. /
.pp/ 0
HasColumnNamepp0 =
(pp= >
$strpp> G
)ppG H
;ppH I
entityrr 
.rr 
Propertyrr 
(rr  
err  !
=>rr" $
err% &
.rr& '
Namerr' +
)rr+ ,
.rr, -
HasMaxLengthrr- 9
(rr9 :
$numrr: <
)rr< =
;rr= >
}ss 
)ss 
;ss 
modelBuilderuu 
.uu 
Entityuu 
<uu  
Roomuu  $
>uu$ %
(uu% &
entityuu& ,
=>uu- /
{vv 
entityww 
.ww 
Propertyww 
(ww  
eww  !
=>ww" $
eww% &
.ww& '
RoomIdww' -
)ww- .
.ww. /
HasColumnNameww/ <
(ww< =
$strww= E
)wwE F
;wwF G
entityyy 
.yy 
Propertyyy 
(yy  
eyy  !
=>yy" $
eyy% &
.yy& '
Nameyy' +
)yy+ ,
.yy, -
HasMaxLengthyy- 9
(yy9 :
$numyy: =
)yy= >
;yy> ?
}zz 
)zz 
;zz 
modelBuilder|| 
.|| 
Entity|| 
<||  
Show||  $
>||$ %
(||% &
entity||& ,
=>||- /
{}} 
entity~~ 
.~~ 
Property~~ 
(~~  
e~~  !
=>~~" $
e~~% &
.~~& '
ShowId~~' -
)~~- .
.~~. /
HasColumnName~~/ <
(~~< =
$str~~= E
)~~E F
;~~F G
entity
ÄÄ 
.
ÄÄ 
Property
ÄÄ 
(
ÄÄ  
e
ÄÄ  !
=>
ÄÄ" $
e
ÄÄ% &
.
ÄÄ& '
FilmId
ÄÄ' -
)
ÄÄ- .
.
ÄÄ. /
HasColumnName
ÄÄ/ <
(
ÄÄ< =
$str
ÄÄ= E
)
ÄÄE F
;
ÄÄF G
entity
ÇÇ 
.
ÇÇ 
Property
ÇÇ 
(
ÇÇ  
e
ÇÇ  !
=>
ÇÇ" $
e
ÇÇ% &
.
ÇÇ& '
Price
ÇÇ' ,
)
ÇÇ, -
.
ÇÇ- .
HasColumnType
ÇÇ. ;
(
ÇÇ; <
$str
ÇÇ< C
)
ÇÇC D
;
ÇÇD E
entity
ÑÑ 
.
ÑÑ 
Property
ÑÑ 
(
ÑÑ  
e
ÑÑ  !
=>
ÑÑ" $
e
ÑÑ% &
.
ÑÑ& '
RoomId
ÑÑ' -
)
ÑÑ- .
.
ÑÑ. /
HasColumnName
ÑÑ/ <
(
ÑÑ< =
$str
ÑÑ= E
)
ÑÑE F
;
ÑÑF G
entity
ÜÜ 
.
ÜÜ 
Property
ÜÜ 
(
ÜÜ  
e
ÜÜ  !
=>
ÜÜ" $
e
ÜÜ% &
.
ÜÜ& '
ShowDate
ÜÜ' /
)
ÜÜ/ 0
.
ÜÜ0 1
HasColumnType
ÜÜ1 >
(
ÜÜ> ?
$str
ÜÜ? E
)
ÜÜE F
;
ÜÜF G
entity
àà 
.
àà 
HasOne
àà 
(
àà 
d
àà 
=>
àà  "
d
àà# $
.
àà$ %
Film
àà% )
)
àà) *
.
ââ 
WithMany
ââ 
(
ââ 
p
ââ 
=>
ââ  "
p
ââ# $
.
ââ$ %
Shows
ââ% *
)
ââ* +
.
ää 
HasForeignKey
ää "
(
ää" #
d
ää# $
=>
ää% '
d
ää( )
.
ää) *
FilmId
ää* 0
)
ää0 1
.
ãã 
OnDelete
ãã 
(
ãã 
DeleteBehavior
ãã ,
.
ãã, -
ClientSetNull
ãã- :
)
ãã: ;
.
åå 
HasConstraintName
åå &
(
åå& '
$str
åå' 7
)
åå7 8
;
åå8 9
entity
éé 
.
éé 
HasOne
éé 
(
éé 
d
éé 
=>
éé  "
d
éé# $
.
éé$ %
Room
éé% )
)
éé) *
.
èè 
WithMany
èè 
(
èè 
p
èè 
=>
èè  "
p
èè# $
.
èè$ %
Shows
èè% *
)
èè* +
.
êê 
HasForeignKey
êê "
(
êê" #
d
êê# $
=>
êê% '
d
êê( )
.
êê) *
RoomId
êê* 0
)
êê0 1
.
ëë 
OnDelete
ëë 
(
ëë 
DeleteBehavior
ëë ,
.
ëë, -
ClientSetNull
ëë- :
)
ëë: ;
.
íí 
HasConstraintName
íí &
(
íí& '
$str
íí' 7
)
íí7 8
;
íí8 9
}
ìì 
)
ìì 
;
ìì $
OnModelCreatingPartial
ïï "
(
ïï" #
modelBuilder
ïï# /
)
ïï/ 0
;
ïï0 1
}
ññ 	
partial
òò 
void
òò $
OnModelCreatingPartial
òò +
(
òò+ ,
ModelBuilder
òò, 8
modelBuilder
òò9 E
)
òòE F
;
òòF G
}
ôô 
}öö –
JC:\Users\thanh\Desktop\Project PRN\SE1607_Win\SE1607_Win\Models\Country.cs
	namespace 	

SE1607_Win
 
. 
Models 
{ 
public 

partial 
class 
Country  
{		 
public

 
Country

 
(

 
)

 
{ 	
Films 
= 
new 
HashSet 
<  
Film  $
>$ %
(% &
)& '
;' (
} 	
public 
string 
CountryCode !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
CountryName !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
virtual 
ICollection "
<" #
Film# '
>' (
Films) .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
} 
} å
GC:\Users\thanh\Desktop\Project PRN\SE1607_Win\SE1607_Win\Models\Film.cs
	namespace 	

SE1607_Win
 
. 
Models 
{ 
public 

partial 
class 
Film 
{		 
public

 
Film

 
(

 
)

 
{ 	
Shows 
= 
new 
HashSet 
<  
Show  $
>$ %
(% &
)& '
;' (
} 	
public 
int 
FilmId 
{ 
get 
;  
set! $
;$ %
}& '
public 
int 
GenreId 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
Title 
{ 
get !
;! "
set# &
;& '
}( )
public 
int 
Year 
{ 
get 
; 
set "
;" #
}$ %
public 
string 
CountryCode !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
FilmUrl 
{ 
get  #
;# $
set% (
;( )
}* +
public 
virtual 
Country !
CountryCodeNavigation 4
{5 6
get7 :
;: ;
set< ?
;? @
}A B
public 
virtual 
Genre 
Genre "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
virtual 
ICollection "
<" #
Show# '
>' (
Shows) .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
} 
} º
HC:\Users\thanh\Desktop\Project PRN\SE1607_Win\SE1607_Win\Models\Genre.cs
	namespace 	

SE1607_Win
 
. 
Models 
{ 
public 

partial 
class 
Genre 
{		 
public

 
Genre

 
(

 
)

 
{ 	
Films 
= 
new 
HashSet 
<  
Film  $
>$ %
(% &
)& '
;' (
} 	
public 
int 
GenreId 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
public 
virtual 
ICollection "
<" #
Film# '
>' (
Films) .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
} 
} å
GC:\Users\thanh\Desktop\Project PRN\SE1607_Win\SE1607_Win\Models\Room.cs
	namespace 	

SE1607_Win
 
. 
Models 
{ 
public 

partial 
class 
Room 
{		 
public

 
Room

 
(

 
)

 
{ 	
Shows 
= 
new 
HashSet 
<  
Show  $
>$ %
(% &
)& '
;' (
} 	
public 
int 
RoomId 
{ 
get 
;  
set! $
;$ %
}& '
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
public 
int 
? 

NumberRows 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
int 
? 

NumberCols 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
virtual 
ICollection "
<" #
Show# '
>' (
Shows) .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
} 
} —
GC:\Users\thanh\Desktop\Project PRN\SE1607_Win\SE1607_Win\Models\Show.cs
	namespace 	

SE1607_Win
 
. 
Models 
{ 
public 

partial 
class 
Show 
{		 
public

 
Show

 
(

 
)

 
{ 	
Bookings 
= 
new 
HashSet "
<" #
Booking# *
>* +
(+ ,
), -
;- .
} 	
public 
int 
ShowId 
{ 
get 
;  
set! $
;$ %
}& '
public 
int 
RoomId 
{ 
get 
;  
set! $
;$ %
}& '
public 
int 
FilmId 
{ 
get 
;  
set! $
;$ %
}& '
public 
DateTime 
? 
ShowDate !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
decimal 
? 
Price 
{ 
get  #
;# $
set% (
;( )
}* +
public 
bool 
? 
Status 
{ 
get !
;! "
set# &
;& '
}( )
public 
int 
? 
Slot 
{ 
get 
; 
set  #
;# $
}% &
public 
virtual 
Film 
Film  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
virtual 
Room 
Room  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
virtual 
ICollection "
<" #
Booking# *
>* +
Bookings, 4
{5 6
get7 :
;: ;
set< ?
;? @
}A B
} 
} ó
CC:\Users\thanh\Desktop\Project PRN\SE1607_Win\SE1607_Win\Program.cs
	namespace 	

SE1607_Win
 
{ 
static		 

class		 
Program		 
{

 
[ 	
	STAThread	 
] 
static 
void 
Main 
( 
) 
{ 	
Application 
. 
SetHighDpiMode &
(& '
HighDpiMode' 2
.2 3
SystemAware3 >
)> ?
;? @
Application 
. 
EnableVisualStyles *
(* +
)+ ,
;, -
Application 
. -
!SetCompatibleTextRenderingDefault 9
(9 :
false: ?
)? @
;@ A
Application 
. 
Run 
( 
new 
GUI  #
.# $
MainGUI$ +
(+ ,
), -
)- .
;. /
} 	
} 
} 